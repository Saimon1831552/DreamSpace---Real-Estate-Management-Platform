<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Register</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="relative h-screen bg-cover bg-center" style="background-image: url('your-landing-background.jpg');">
  <div class="absolute inset-0 bg-black bg-opacity-60 z-0"></div>

  <div class="relative z-10 flex justify-center items-center h-full">
    <div class="bg-white bg-opacity-90 backdrop-blur-md p-8 rounded-lg shadow-2xl w-full max-w-md">
      <h2 class="text-2xl font-bold text-center text-red-600 mb-6">Create Account</h2>

      <form id="registrationForm" action="registration.php" method="POST" novalidate>

        <div class="mb-4">
          <label for="role" class="block text-sm font-medium text-gray-700">Register as</label>
          <select id="role" name="role" required
            class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-red-500 focus:border-red-500 sm:text-sm">
            <option value="">-- Select Role --</option>
            <option value="user">User</option>
            <option value="agent">Agent</option>
          </select>
        </div>

  
        <div class="mb-4">
          <label for="username" class="block text-sm font-medium text-gray-700">Username</label>
          <input type="text" id="username" name="username" required
            class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-red-500 focus:border-red-500 sm:text-sm" />
          <p id="usernameError" class="text-red-600 text-sm mt-1 hidden"></p>
        </div>

        <div class="mb-4">
          <label for="email" class="block text-sm font-medium text-gray-700">Email</label>
          <input type="email" id="email" name="email" required
            class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-red-500 focus:border-red-500 sm:text-sm" />
          <p id="emailError" class="text-red-600 text-sm mt-1 hidden"></p>
        </div>

 
        <div class="mb-4">
          <label for="password" class="block text-sm font-medium text-gray-700">Password</label>
          <input type="password" id="password" name="password" required
            class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-red-500 focus:border-red-500 sm:text-sm" />
          <p id="passwordError" class="text-red-600 text-sm mt-1 hidden"></p>
        </div>

        <div class="mb-4">
          <label for="confirm_password" class="block text-sm font-medium text-gray-700">Confirm Password</label>
          <input type="password" id="confirm_password" name="confirm_password" required
            class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-red-500 focus:border-red-500 sm:text-sm" />
          <p id="matchError" class="text-red-600 text-sm mt-1 hidden">Passwords do not match</p>
        </div>


        <div class="flex flex-col sm:flex-row gap-3">
          <button type="submit"
            class="w-full sm:w-1/2 bg-red-600 hover:bg-white text-white hover:text-black font-bold py-2 px-4 rounded border border-red-600">
            Register
          </button>

          <a href="login.html"
            class="w-full sm:w-1/2 text-center bg-gray-200 hover:bg-red-100 text-red-700 font-semibold py-2 px-4 rounded border border-red-600">
            Already have an account?
          </a>
        </div>

        <div class="mt-4 text-center">
          <a href="index.html" class="text-sm text-blue-600 hover:underline">‚Üê Back to Home</a>
        </div>
      </form>
    </div>
  </div>

  <div id="successMessage" class="hidden bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative max-w-md mx-auto mt-6 z-20">
    <strong class="font-bold">Success!</strong>
    <span class="block sm:inline">Your account has been created successfully.</span>
  </div>


  <script>
    const form = document.getElementById('registrationForm');
    const username = document.getElementById('username');
    const email = document.getElementById('email');
    const password = document.getElementById('password');
    const confirm = document.getElementById('confirm_password');
    const role = document.getElementById('role');

    const usernameError = document.getElementById('usernameError');
    const emailError = document.getElementById('emailError');
    const passwordError = document.getElementById('passwordError');
    const matchError = document.getElementById('matchError');

    function validateUsername() {
      const val = username.value.trim();
      if (!val) {
        usernameError.textContent = 'Username is required';
        usernameError.classList.remove('hidden');
        return false;
      }
      if (!/^[a-zA-Z0-9_]{3,16}$/.test(val)) {
        usernameError.textContent = 'Username must be 3-16 characters, letters, numbers, underscore only';
        usernameError.classList.remove('hidden');
        return false;
      }
      usernameError.classList.add('hidden');
      return true;
    }

    function validateEmail() {
      const val = email.value.trim();
      const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!val) {
        emailError.textContent = 'Email is required';
        emailError.classList.remove('hidden');
        return false;
      }
      if (!regex.test(val)) {
        emailError.textContent = 'Invalid email format';
        emailError.classList.remove('hidden');
        return false;
      }
      emailError.classList.add('hidden');
      return true;
    }

    function validatePassword() {
      const val = password.value;
      if (!val) {
        passwordError.textContent = 'Password is required';
        passwordError.classList.remove('hidden');
        return false;
      }
      if (val.length < 8 || !/[a-z]/.test(val) || !/[A-Z]/.test(val) || !/[0-9]/.test(val)) {
        passwordError.textContent = 'Password must be at least 8 characters and contain upper, lower, and digit';
        passwordError.classList.remove('hidden');
        return false;
      }
      passwordError.classList.add('hidden');
      return true;
    }

    function validateConfirmPassword() {
      if (password.value !== confirm.value) {
        matchError.classList.remove('hidden');
        confirm.classList.add('border-red-500');
        return false;
      }
      matchError.classList.add('hidden');
      confirm.classList.remove('border-red-500');
      return true;
    }

    form.addEventListener('submit', function (e) {
      const valid = validateUsername() & validateEmail() & validatePassword() & validateConfirmPassword();
      if (!role.value) {
        alert("Please select a role.");
        e.preventDefault();
        return;
      }
      if (!valid) e.preventDefault();
    });

    username.addEventListener('input', validateUsername);
    email.addEventListener('input', validateEmail);
    password.addEventListener('input', validatePassword);
    confirm.addEventListener('input', validateConfirmPassword);
  </script>
</body>
</html>
